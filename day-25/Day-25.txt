==================== Service Account ========================
# kubectl get sa => Get service account in default namespace. Here we have SA name as 'default'.
NAME      SECRETS   AGE
default   0         39d

# kubectl get sa -A | grep default
default              default                                       0         39d
demo                 default                                       0         38d
kube-node-lease      default                                       0         39d
kube-public          default                                       0         39d
kube-system          default                                       0         39d
local-path-storage   default                                       0         39d
mem-example          default                                       0         21d

# kubectl describe sa default => It has no tokens or secrets here.
Name:                default
Namespace:           default
Labels:              <none>
Annotations:         <none>
Image pull secrets:  <none>
Mountable secrets:   <none>
Tokens:              <none>
Events:              <none>

# kubectl get sa default -o yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  creationTimestamp: "2025-07-19T08:11:07Z"
  name: default
  namespace: default
  resourceVersion: "365"
  uid: 9c071dfb-4afd-4429-bd95-dd89b913c063
  
# kubectl create sa build-sa
# kubectl get sa
# kubectl describe sa build-sa
Name:                build-sa
Namespace:           default
Labels:              <none>
Annotations:         <none>
Image pull secrets:  <none>
Mountable secrets:   <none>
Tokens:              <none>
Events:              <none>

# vim secret.yml
================================================================
apiVersion: v1
kind: Secret
metadata:
  name: build-robot-secret
  annotations:
    kubernetes.io/service-account.name: build-sa
type: kubernetes.io/service-account-token
================================================================
# kubectl apply -f secret.yml => Create secret for this service account.
# kubectl get secrets
NAME                 TYPE                                  DATA   AGE
build-robot-secret   kubernetes.io/service-account-token   3      29s

# kubectl describe secrets build-robot-secret
Name:         build-robot-secret
Namespace:    default
Labels:       <none>
Annotations:  kubernetes.io/service-account.name: build-sa
              kubernetes.io/service-account.uid: a03a43b4-fa30-4575-b7db-5a1edba35249

Type:  kubernetes.io/service-account-token

Data
====
ca.crt:     1107 bytes
namespace:  7 bytes
token:      eyJhbGciOiJSUzI1NiIsImtpZCI6Iml5a1Q1YkNiZjRBWVI5bXExM0g3Qm41UC16UjR1WUoxVjlSYmlnMGVZRWcifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImJ1aWxkLXJvYm90LXNlY3JldCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJidWlsZC1zYSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6ImEwM2E0M2I0LWZhMzAtNDU3NS1iN2RiLTVhMWVkYmEzNTI0OSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmJ1aWxkLXNhIn0.pFD-KVYeIpdtzI1PaIenpnmgA4K39RwV71iPkokQAAdKp8883RCaWOmt7KSdYaLPZvdJJRWQq6R0yn-cxes6B3_ci4odVwgkMoMcvpmBn5T7Xb6CqTz-CSeLzobJmpfL1d8B6MterffXNM9n43Utq8PGWl8C26uL4ba0LPuaHAAwtZkcAsdZ2BxN9m0nEGNFijRKk4Je6mN_gfzp6Y6B7jd-cWHZUadI8PM_ZoY7HQNdTxNa3dcJOofeOfNX5Vo5CW7og6_2waRY7CjnDH4ae5pziAiVBDZaI0Czd9Cgr8_vNmmaduqLkTrqP4YeKMIyXnaVVXvAGw1fXDJigRnJqw

# kubectl get pods --as build-sa
Error from server (Forbidden): pods is forbidden: User "build-sa" cannot list resource "pods" in API group "" in the namespace "default"

# kubectl auth can-i get pods --as build-sa => O/P: no
# kubectl create role build-role --verb=list,get,watch --resource=pod
# kubectl create rolebinding build-rb --role=build-role --user=build-sa
# kubectl auth can-i get pods --as build-sa => O/P: yes
# kubectl run nginx --image=nginx
# kubectl get pods --as build-sa
NAME    READY   STATUS    RESTARTS   AGE
nginx   1/1     Running   0          31s

# kubectl describe pod nginx --as build-sa
Service Account:  default
 Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-xxvqw (ro)
	  
==> Here 'default' as the default SA in this pod. All other details like, token, certificate, namespace details will be in the form of files mounted at '/var/run/secrets/kubernetes.io/serviceaccount' location in pods.
# kubectl exec -it nginx -- bash
root@nginx:/# cd /var/run/secrets/kubernetes.io/serviceaccount
# root@nginx:/var/run/secrets/kubernetes.io/serviceaccount# ls -ll
total 0
lrwxrwxrwx 1 root root 13 Aug 28 03:29 ca.crt -> ..data/ca.crt
lrwxrwxrwx 1 root root 16 Aug 28 03:29 namespace -> ..data/namespace
lrwxrwxrwx 1 root root 12 Aug 28 03:29 token -> ..data/token

